<app-navbar></app-navbar>
<div class="d-flex justify-content-center mt-5">
<h4>Please Register</h4>
</div>
@if (registrationStatus.message === "Not attempted yet"){
    <div class="d-flex justify-content-center">
        <div class="d-flex flex-column mt-2 w-25 ">
            <form [formGroup]="form" class="d-flex flex-column">
                <mat-form-field>
                    <mat-label>Username</mat-label>
                    <input matInput type="text" formControlName="username">
                    @if (form.get("username")?.hasError("required")) {
                        <mat-error>Username is a required field</mat-error>
                      } 
                      @if (form.get("username")?.hasError("pattern")) {
                        <mat-error>Username can contain only letters and numbers</mat-error>
                      }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Email Address</mat-label>
                    <input matInput type="text" formControlName="email">
                    <mat-error >Email Address is required field </mat-error>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>First Name</mat-label>
                    <input matInput type="text" formControlName="firstName">
                    @if (form.get("firstName")?.hasError("required")) {
                        <mat-error>First Name is a required field</mat-error>
                      } 
                    @if (form.get("firstName")?.hasError("pattern")) {
                        <mat-error>First Name can contain only letters</mat-error>
                      }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Last Name</mat-label>
                    <input matInput type="text" formControlName="lastName">
                    @if (form.get("lastName")?.hasError("required")) {
                        <mat-error>Last Name is a required field</mat-error>
                      } 
                    @if (form.get("lastName")?.hasError("pattern")) {
                        <mat-error>Last Name can contain only letters</mat-error>
                      }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Password</mat-label>
                    <input matInput type="password" formControlName="password">
                    @if (form.get("password")?.hasError("required")) {
                        <mat-error>Password is required field</mat-error>
                      } 
                    @if (form.get("password")?.hasError("minlength")) {
                        <mat-error>Password must be at least 4 characters long</mat-error>
                      }
                    @if (form.get("password")?.hasError("pattern")) {
                        <mat-error>Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character</mat-error>
                      }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Confirm Password</mat-label>
                    <input matInput type="password" formControlName="confirmPassword">
                    
                    @if(form.get("confirmPassword")?.hasError("passwordMismatch")){
                        <mat-error>Password do not match</mat-error>
                    } 
                    @if(form.get("confirmPassword")?.hasError("required")){
                        <mat-error>Confirm Password is required field</mat-error>
                    }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Address</mat-label>
                    <input matInput type="text" formControlName="address">
                    @if(form.get('address')?.hasError('required')){
                        <mat-error>Address is required field</mat-error>
                    } 
                    @if(form.get('address')?.hasError('pattern')){
                        <mat-error>Address can contain only letters</mat-error>
                    }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>City</mat-label>
                    <input matInput type="text" formControlName="city">
                    @if(form.get('city')?.hasError('required')){
                        <mat-error>City is a required field</mat-error>
                    } 
                    @if(form.get('city')?.hasError('pattern')){
                        <mat-error>City can contain only letters</mat-error>
                    }
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Phone Number</mat-label>
                    <input matInput type="text" formControlName="phoneNumber">
                    @if (form.get("phoneNumber")?.hasError("required")) {
                        <mat-error>Phone Number is required field</mat-error>
                      } 
                    @if (form.get("phoneNumber")?.hasError("minlength")) {
                        <mat-error>hone Number must be at least 10 digits long</mat-error>
                      }
                    @if (form.get("phoneNumber")?.hasError("pattern")) {
                        <mat-error>hone Number can contain only numbers</mat-error>
                      }
                </mat-form-field>

                <button mat-flat-button (click)="onSubmit()" [disabled]="form.invalid">
                    Register
                </button>
            </form>

        </div>
    </div>
    } @else {
        @if ( registrationStatus.success ){
            <div class="d-flex justify-content-center">
                <div class="d-flex justify-content-center alert alert-success mt-2 w-50 ">
                    <strong>Success:</strong> <span class="message-padding">{{registrationStatus.message}}</span> 
                </div>
            </div>
        } @else {
            <div class="d-flex justify-content-center">
                <div class="d-flex justify-content-center alert alert-danger mt-2  w-50">
                    <strong>Failure:</strong> <span class="message-padding">{{registrationStatus.message}}</span>
                </div>
            </div>
        }
        <!-- <button mat-flat-button color="primary" class="mt-2" (click)="registerAnother()" >
            Register another user
        </button> -->
    }

